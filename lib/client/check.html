<!DOCTYPE html>
<html>
<head>
<script src=lib.js type=text/javascript></script>
<script>
var game=null;
var player=null;
var circle=null;
function load()
{
	JSG.loader.load([
		"mario.gif",
		"wall.png"
	]).then(setup);
}
function setup()
{
	game = new JSG.Game(document.getElementById("game"),500,500);
	mario = new JSG.Sprite(JSG.loader.res["mario.gif"]);
	var rec = new JSG.Sprite(JSG.loader.res["wall.png"]);

	player = new JSG.Entity();
	var wall=new JSG.Entity();
	wall.sprite=rec;
	wall.solid=true;
	player.sprite = mario;
	speed=5
    player.addEventListener("key-down-ArrowUp",function(){this.speed_y=-speed;this.gravitation=0.5});
    player.addEventListener("key-down-ArrowRight",function(){this.speed_x=speed});
    player.addEventListener("key-down-ArrowLeft",function(){this.speed_x=-speed});
	player.addEventListener("collision",function(){this.speed_y=0;this.gravitation=0;})
	player.addEventListener("out-of-room",function(){this.x=-this.width;this.y=400})
	var room = new JSG.Room();
	room.place(player, 250,420);
	for(var x=0;x<500;x+=50)
	{
		room.place(wall, x,0);
		room.place(wall, x,450);
	}

	game.addRoom(room);
	game.start()
}
</script>
</head>
<body>
<div id="game"></div>
</body>
</html>